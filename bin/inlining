#!/usr/bin/env node

"use strict";

var fs = require("fs");

var inlining = require("../");

var html = process.argv[2];
var stdin;

if (html === "-") {
  html = "";
  stdin = process.openStdin();
  stdin.setEncoding("utf-8");
  stdin.on("data", function (chunk) {
    html += chunk;
  });
  stdin.on("end", function () {
    inlining(
      html,
      function (res) {
        console.log(res);
      }
    );
  });
} else {
  inlining(
    fs.readFileSync(html, "utf8"),
    html,
    function (res) {
      console.log(res);
    }
  );
}
